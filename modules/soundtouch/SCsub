# ruff: noqa
Import("env")

soundtouch_dir = "#modules/soundtouch/soundtouch"

module_sources = [
    "soundtouch_module.cpp",
]

soundtouch_sources = [
    "AAFilter.cpp",
    "FIFOSampleBuffer.cpp",
    "FIRFilter.cpp",
    "InterpolateCubic.cpp",
    "InterpolateLinear.cpp",
    "InterpolateShannon.cpp",
    "PeakFinder.cpp",
    "RateTransposer.cpp",
    "SoundTouch.cpp",
    "TDStretch.cpp",
    "cpu_detect_x86.cpp",
]

optional_sources = [
    "mmx_optimized.cpp",
    "sse_optimized.cpp",
]

soundtouch_sources = [soundtouch_dir + "/" + s for s in soundtouch_sources]
optional_sources = [soundtouch_dir + "/" + s for s in optional_sources]

env.add_source_files(env.modules_sources, ["register_types.cpp"])
env.add_source_files(env.modules_sources, module_sources)
env.add_source_files(env.modules_sources, soundtouch_sources)
env.add_source_files(env.modules_sources, optional_sources)

env.Append(CPPPATH=[soundtouch_dir])
